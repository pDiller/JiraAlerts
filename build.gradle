buildscript {
    ext {
        springBootVersion = '1.5.4.RELEASE'
    }
    repositories {
        maven {
            url("https://plugins.gradle.org/m2/")
        }
    }
    dependencies {
        classpath("org.springframework.boot:spring-boot-gradle-plugin:${springBootVersion}")
        classpath("gradle.plugin.com.boxfuse.client:flyway-release:4.2.0")
    }
}

apply plugin: 'war'
apply plugin: 'org.flywaydb.flyway'

allprojects{

    version = '0.0.1-SNAPSHOT'
    sourceCompatibility = 1.8

    apply plugin: 'java'
    apply plugin: 'idea'
    apply plugin: 'org.springframework.boot'

    repositories {
        jcenter()
    }

    dependencies{
        testCompile('org.springframework.boot:spring-boot-starter-test')
        testCompile('org.mockito:mockito-all:1.9.5')
        testCompile('org.assertj:assertj-core:3.8.0')
    }
}

subprojects {
    dependencies {

        compile('com.google.guava:guava:20.0')

        compile('org.apache.wicket:wicket:8.0.0-M6')
        compile('org.apache.wicket:wicket-spring:8.0.0-M6')

        compile('org.springframework.boot:spring-boot-starter-data-jpa')
    }
}

dependencies {
    compile('org.flywaydb:flyway-core')
    compile('org.springframework.boot:spring-boot-starter-web')
    compile('org.springframework.boot:spring-boot-starter-data-jpa')
    compile(project(':integration'))

    runtime('mysql:mysql-connector-java')

    providedRuntime('org.springframework.boot:spring-boot-starter-tomcat')
}

flyway {
    url = 'jdbc:mysql://localhost:3306/jiraalerts?serverTimezone=UTC'
    user = 'root'
    password = 'root'
}